//! # 游戏常量定义
//!
//! 包含所有游戏相关的常量配置。
//!
//! ## 设计原则
//!
//! 所有可调整的游戏参数都集中在此模块，便于：
//! - 游戏平衡性调整
//! - 不同难度配置
//! - 快速原型迭代
//!
//! ## 常量分类
//!
//! - **游戏区域**: 网格尺寸、单元格大小
//! - **果实生命周期**: 各类果实的存在时长
//! - **Buff持续时间**: 各种增益/减益效果的持续时间
//! - **沙虫模式**: 沙虫变身动画的各阶段参数

use macroquad::prelude::*;

// ============================================================================
// 游戏区域常量
// ============================================================================
// 这些常量定义了游戏的基本尺寸。修改这些值会影响：
// - 窗口大小 (GRID_W * CELL, GRID_H * CELL)
// - 游戏难度（更大的区域 = 更容易）
// - 果实生成位置范围

/// 单元格像素尺寸
///
/// 每个网格单元的边长（像素）。蛇的每一节、果实都占据一个单元格。
/// 较大的值会使游戏元素更大，但减少可用空间。
pub const CELL: f32 = 20.0;

/// 游戏区域宽度（格子数）
///
/// 水平方向的网格数量。窗口宽度 = GRID_W * CELL
pub const GRID_W: i32 = 32;

/// 游戏区域高度（格子数）
///
/// 垂直方向的网格数量。窗口高度 = GRID_H * CELL
pub const GRID_H: i32 = 24;

// ============================================================================
// 果实生命周期常量
// ============================================================================
// 果实在场景中存在的时间。超时后自动消失。
// 设计考量：
// - 陷阱果实：较短，给玩家反应时间但不能太长
// - 功能果实：中等，让玩家有机会获取但需要主动追求
// - 特殊果实：较短，增加稀有感

/// 陷阱果实存在时长（秒）
///
/// 陷阱类果实（trap, freeze, slow等）在场景中的存在时间。
/// 较短的时间可以减少玩家被动触发的概率。
pub const TRAP_LIFETIME: f32 = 5.0;

/// 护盾果实存在时长（秒）
///
/// 护盾果实是强力增益，较长的存在时间给玩家更多获取机会。
pub const SHIELD_FRUIT_LIFETIME: f32 = 8.0;

/// 沙虫果实存在时长（秒）
///
/// 沙虫果实触发特殊动画，较短时间增加稀有感。
pub const SANDWORM_FRUIT_LIFETIME: f32 = 3.0;

/// 幸运方块存在时长（秒）
///
/// 幸运方块效果随机，中等时间平衡风险与收益。
pub const LUCKY_LIFETIME: f32 = 6.0;

// ============================================================================
// Buff持续时间常量
// ============================================================================
// Buff效果激活后的持续时间。
// 设计原则：
// - 正面Buff：较长，让玩家享受增益
// - 负面Buff：较短，避免过度惩罚
// - 强力效果：时间更短以平衡

/// 护盾Buff持续时间（秒）
///
/// 护盾提供完全免疫，是最强的防御Buff。
/// 10秒足够玩家安全通过危险区域。
pub const SHIELD_DURATION: f32 = 10.0;

/// 速度Buff持续时间（秒）
///
/// 速度翻倍，移动更快但也更难控制。
/// 5秒是一个平衡点：足够有用但不会太长。
pub const SPEED_DURATION: f32 = 5.0;

/// 幽灵Buff持续时间（秒）
///
/// 幽灵模式可穿墙穿身，非常强力。
/// 与速度Buff相同时长保持一致性。
pub const GHOST_DURATION: f32 = 5.0;

/// 冰冻持续时间（秒）
///
/// 完全无法移动，是最严重的负面效果。
/// 2秒足够造成威胁但不会太令人沮丧。
pub const FREEZE_DURATION: f32 = 2.0;

/// 减速持续时间（秒）
///
/// 移动速度减半，影响较温和。
/// 5秒让玩家有足够时间适应。
pub const SLOW_DURATION: f32 = 5.0;

/// 眩晕持续时间（秒）
///
/// 方向输入有概率偏移，增加不确定性。
/// 5秒与其他中等负面效果一致。
pub const DIZZY_DURATION: f32 = 5.0;

/// 粘液持续时间（秒）
///
/// 移动有拖拽感，视觉效果明显。
/// 5秒保持与其他负面效果一致。
pub const SLIME_DURATION: f32 = 5.0;

// ============================================================================
// 沙虫模式常量
// ============================================================================
// 沙虫模式是一个复杂的多阶段动画序列：
// 1. Flashing: 蛇原地闪烁，准备变身
// 2. Transforming: 从头到尾逐节变成沙色
// 3. Exiting: 蛇向边界移动直到完全离开
// 4. Filling: 蛇从边界进入并不断增长填满屏幕
// 5. FilledFlashing: 填满后闪烁变红
// 6. Consuming: 坍缩动画，所有格子向中心收缩

/// 沙虫模式移动间隔（秒）
///
/// 沙虫模式下蛇的移动速度。0.02秒 = 50次/秒，非常快。
/// 这使得填充动画看起来流畅且震撼。
pub const SANDWORM_TICK_INTERVAL: f32 = 0.02;

/// 沙虫闪烁阶段持续时间（秒）
///
/// 变身前的闪烁预警时间。给玩家心理准备。
pub const SANDWORM_FLASH_DURATION: f32 = 1.5;

/// 沙虫每节变色间隔（秒）
///
/// 从头到尾逐节变色的间隔。较短的间隔使动画更流畅。
pub const SANDWORM_TRANSFORM_INTERVAL: f32 = 0.08;

/// 沙虫填满后闪烁持续时间（秒）
///
/// 填满屏幕后的闪烁时间，为最终坍缩做准备。
pub const SANDWORM_FILLED_FLASH_DURATION: f32 = 1.5;
